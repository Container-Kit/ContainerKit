<script lang="ts" ✂prettier:content✂="CiAgICBpbXBvcnQgQ2lyY2xlUGxheSBmcm9tICdAbHVjaWRlL3N2ZWx0ZS9pY29ucy9jaXJjbGUtcGxheSc7CiAgICBpbXBvcnQgQ2lyY2xlU3RvcCBmcm9tICdAbHVjaWRlL3N2ZWx0ZS9pY29ucy9jaXJjbGUtc3RvcCc7CiAgICBpbXBvcnQgRGVsZXRlIGZyb20gJ0BsdWNpZGUvc3ZlbHRlL2ljb25zL3RyYXNoLTInOwogICAgaW1wb3J0IExvYWRlciBmcm9tICdAbHVjaWRlL3N2ZWx0ZS9pY29ucy9sb2FkZXInOwogICAgaW1wb3J0IEluZm9ybWF0aW9uIGZyb20gJ0BsdWNpZGUvc3ZlbHRlL2ljb25zL3NsaWRlcnMtaG9yaXpvbnRhbCc7CiAgICBpbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3N2ZWx0ZS1zb25uZXInOwogICAgaW1wb3J0IHR5cGUgeyBDb250YWluZXJDbGllbnQgfSBmcm9tICckbGliL21vZGVscy9jb250YWluZXInOwoKICAgIGltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJyRsaWIvY29tcG9uZW50cy91aS9idXR0b24nOwogICAgaW1wb3J0ICogYXMgVG9vbHRpcCBmcm9tICckbGliL2NvbXBvbmVudHMvdWkvdG9vbHRpcCc7CiAgICBpbXBvcnQgeyBTZXBhcmF0b3IgfSBmcm9tICckbGliL2NvbXBvbmVudHMvdWkvc2VwYXJhdG9yJzsKICAgIGltcG9ydCB7IHN0YXJ0Q29udGFpbmVyLCBzdG9wQ29udGFpbmVyIH0gZnJvbSAnJGxpYi9zZXJ2aWNlcy9jb250YWluZXJpemF0aW9uL2NvbnRhaW5lcnMnOwogICAgaW1wb3J0IERlbGV0ZUNvbnRhaW5lckRpYWxvZyBmcm9tICcuL2RlbGV0ZS1jb250YWluZXItZGlhbG9nLnN2ZWx0ZSc7CiAgICBpbXBvcnQgSW5mb3JtYXRpb25EcmF3ZXIgZnJvbSAnLi9pbmZvcm1hdGlvbi1kcmF3ZXIuc3ZlbHRlJzsKCiAgICB0eXBlIFByb3BzID0gewogICAgICAgIHN0YXR1czogQ29udGFpbmVyQ2xpZW50WydzdGF0dXMnXTsKICAgICAgICBpZDogc3RyaW5nOwogICAgICAgIGdldEFsbENvbnRhaW5lckxpc3Q6ICgpID0+IFByb21pc2U8dm9pZD47CiAgICAgICAgZGVsZXRlQ29udGFpbmVyOiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjsKICAgIH07CgogICAgbGV0IHsgc3RhdHVzLCBpZCwgZ2V0QWxsQ29udGFpbmVyTGlzdCwgZGVsZXRlQ29udGFpbmVyIH06IFByb3BzID0gJHByb3BzKCk7CgogICAgbGV0IGRpc2FibGVBY3Rpb25zID0gJHN0YXRlKGZhbHNlKTsKICAgIGxldCBzdGFydGluZ0NvbnRhaW5lciA9ICRzdGF0ZShmYWxzZSk7CiAgICBsZXQgc2hvd0RlbGV0ZURpYWxvZyA9ICRzdGF0ZShmYWxzZSk7CiAgICBsZXQgc2hvd0luZm9ybWF0aW9uRHJhd2VyID0gJHN0YXRlKGZhbHNlKTsKCiAgICBhc3luYyBmdW5jdGlvbiBoYW5kbGVDb250YWluZXJSdW5uaW5nU3RhdGUoKSB7CiAgICAgICAgc3RhcnRpbmdDb250YWluZXIgPSBkaXNhYmxlQWN0aW9ucyA9IHRydWU7CiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHN0YXR1cyA9PT0gJ3J1bm5pbmcnID8gJ3N0b3BwZWQnIDogJ3N0YXJ0ZWQnOwogICAgICAgIGNvbnN0IG91dHB1dCA9IHN0YXR1cyA9PT0gJ3J1bm5pbmcnID8gYXdhaXQgc3RvcENvbnRhaW5lcihpZCkgOiBhd2FpdCBzdGFydENvbnRhaW5lcihpZCk7CiAgICAgICAgYXdhaXQgZ2V0QWxsQ29udGFpbmVyTGlzdCgpOwogICAgICAgIHN0YXJ0aW5nQ29udGFpbmVyID0gZGlzYWJsZUFjdGlvbnMgPSBmYWxzZTsKICAgICAgICBpZiAob3V0cHV0LmVycm9yKSB7CiAgICAgICAgICAgIHRvYXN0LmVycm9yKG91dHB1dC5tZXNzYWdlKTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihvdXRwdXQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAob3V0cHV0LnN0ZG91dCAmJiAhb3V0cHV0LmVycm9yKSB7CiAgICAgICAgICAgIHRvYXN0LnN1Y2Nlc3MoYENvbnRhaW5lciAke291dHB1dC5zdGRvdXR9ICR7bWVzc2FnZX0gc3VjY2Vzc2Z1bGx5YCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNvbnRhaW5lcigpIHsKICAgICAgICBkZWxldGVDb250YWluZXIoaWQpOwogICAgICAgIHNob3dEZWxldGVEaWFsb2cgPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBoYW5kbGVTaG93SW5mb3JtYXRpb25EcmF3ZXIoKSB7CiAgICAgICAgc2hvd0luZm9ybWF0aW9uRHJhd2VyID0gdHJ1ZTsKICAgIH0K">{}</script>

<div class="flex items-center h-full">
    <Tooltip.Provider delayDuration={150}>
        <Tooltip.Root>
            <Tooltip.Trigger>
                {#snippet child({ props })}
                    <Button
                        {...props}
                        variant="ghost"
                        size="icon"
                        onclick={handleContainerRunningState}
                        class={[
                            status === 'running'
                                ? 'text-red-400 hover:bg-red-100 hover:text-red-400'
                                : 'text-green-400'
                        ]}
                        disabled={disableActions}
                    >
                        {#if status === 'running'}
                            <CircleStop />
                        {:else if startingContainer}
                            <Loader class="animate-spin" />
                        {:else}
                            <CirclePlay />
                        {/if}
                    </Button>
                {/snippet}
            </Tooltip.Trigger>
            <Tooltip.Content side="left">
                <p>{status === 'running' ? 'Stop' : 'Start'}</p>
            </Tooltip.Content>
        </Tooltip.Root>
    </Tooltip.Provider>

    <Separator orientation="vertical" class="h-5" />

    {#if status === 'stopped'}
        <Tooltip.Provider delayDuration={10}>
            <Tooltip.Root>
                <Tooltip.Trigger class="bg-destructive">
                    {#snippet child({ props })}
                        <Button
                            {...props}
                            variant="ghost"
                            size="icon"
                            class="text-red-400 hover:bg-red-100 hover:text-red-700 dark:hover:bg-red-100"
                            disabled={disableActions}
                            onclick={() => (showDeleteDialog = true)}
                        >
                            <Delete />
                        </Button>
                    {/snippet}
                </Tooltip.Trigger>
                <Tooltip.Content
                    side="right"
                    class="bg-destructive text-destructive-foreground"
                    arrowClasses="bg-destructive"
                >
                    <p>Delete</p>
                </Tooltip.Content>
            </Tooltip.Root>
        </Tooltip.Provider>
        <DeleteContainerDialog bind:open={showDeleteDialog} {handleDeleteContainer} {id} />
    {/if}

    {#if status === 'running'}
        <Tooltip.Provider delayDuration={150}>
            <Tooltip.Root>
                <Tooltip.Trigger>
                    {#snippet child({ props })}
                        <Button
                            {...props}
                            variant="ghost"
                            size="icon"
                            onclick={handleShowInformationDrawer}
                            disabled={disableActions}
                        >
                            <Information />
                        </Button>
                    {/snippet}
                </Tooltip.Trigger>
                <Tooltip.Content side="left">
                    <p>Logs</p>
                </Tooltip.Content>
            </Tooltip.Root>
        </Tooltip.Provider>
        <InformationDrawer bind:open={showInformationDrawer} {id} />
    {/if}
</div>
