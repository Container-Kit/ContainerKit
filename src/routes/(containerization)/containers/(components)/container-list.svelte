<script lang="ts" generics="TData, TValue" ✂prettier:content✂="CiAgICBpbXBvcnQgewogICAgICAgIHR5cGUgQ29sdW1uRGVmLAogICAgICAgIHR5cGUgQ29sdW1uRmlsdGVyc1N0YXRlLAogICAgICAgIHR5cGUgUm93U2VsZWN0aW9uU3RhdGUsCiAgICAgICAgdHlwZSBQYWdpbmF0aW9uU3RhdGUsCiAgICAgICAgdHlwZSBTb3J0aW5nU3RhdGUsCiAgICAgICAgZ2V0Q29yZVJvd01vZGVsLAogICAgICAgIGdldEZpbHRlcmVkUm93TW9kZWwsCiAgICAgICAgZ2V0UGFnaW5hdGlvblJvd01vZGVsCiAgICB9IGZyb20gJ0B0YW5zdGFjay90YWJsZS1jb3JlJzsKICAgIGltcG9ydCB7IGFuaW1hdGUsIHN0YWdnZXIgfSBmcm9tICdtb3Rpb24nOwogICAgaW1wb3J0IHsgY3JlYXRlU3ZlbHRlVGFibGUsIEZsZXhSZW5kZXIgfSBmcm9tICckbGliL2NvbXBvbmVudHMvdWkvZGF0YS10YWJsZSc7CiAgICBpbXBvcnQgKiBhcyBUYWJsZSBmcm9tICckbGliL2NvbXBvbmVudHMvdWkvdGFibGUnOwogICAgaW1wb3J0IHsgSW5wdXQgfSBmcm9tICckbGliL2NvbXBvbmVudHMvdWkvaW5wdXQnOwogICAgaW1wb3J0IHsgTGFiZWwgfSBmcm9tICckbGliL2NvbXBvbmVudHMvdWkvbGFiZWwnOwogICAgaW1wb3J0IHsgU3dpdGNoIH0gZnJvbSAnJGxpYi9jb21wb25lbnRzL3VpL3N3aXRjaCc7CiAgICBpbXBvcnQgeyBQcmVzc2VkS2V5cyB9IGZyb20gJ3J1bmVkJzsKICAgIGltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJyRsaWIvY29tcG9uZW50cy91aS9idXR0b24nOwogICAgaW1wb3J0IFJlZnJlc2ggZnJvbSAnQGx1Y2lkZS9zdmVsdGUvaWNvbnMvcm90YXRlLWNjdyc7CiAgICBpbXBvcnQgU2VhcmNoIGZyb20gJ0BsdWNpZGUvc3ZlbHRlL2ljb25zL3NlYXJjaCc7CiAgICBpbXBvcnQgeyBvbk1vdW50IH0gZnJvbSAnc3ZlbHRlJzsKCiAgICB0eXBlIERhdGFUYWJsZVByb3BzPFREYXRhLCBUVmFsdWU+ID0gewogICAgICAgIGNvbHVtbnM6IENvbHVtbkRlZjxURGF0YSwgVFZhbHVlPltdOwogICAgICAgIGRhdGE6IFREYXRhW107CiAgICB9OwoKICAgIHR5cGUgUHJvcHMgPSB7CiAgICAgICAgc2hvd09ubHlSdW5uaW5nQ29udGFpbmVyczogYm9vbGVhbjsKICAgICAgICBnZXRBbGxDb250YWluZXJzOiAoKSA9PiBQcm9taXNlPHZvaWQ+OwogICAgfTsKCiAgICBsZXQgewogICAgICAgIGRhdGEsCiAgICAgICAgY29sdW1ucywKICAgICAgICBzaG93T25seVJ1bm5pbmdDb250YWluZXJzID0gJGJpbmRhYmxlKCksCiAgICAgICAgZ2V0QWxsQ29udGFpbmVycwogICAgfTogRGF0YVRhYmxlUHJvcHM8VERhdGEsIFRWYWx1ZT4gJiBQcm9wcyA9ICRwcm9wcygpOwoKICAgIGxldCBzZWFyY2hJbnB1dEJveDogSFRNTElucHV0RWxlbWVudCB8IG51bGwgPSAkc3RhdGUobnVsbCk7CiAgICBsZXQgc2hvd0tleWJvYXJkU2hvcnRjdXQgPSAkc3RhdGUodHJ1ZSk7CgogICAgY29uc3Qga2V5cyA9IG5ldyBQcmVzc2VkS2V5cygpOwogICAga2V5cy5vbktleXMoWydtZXRhJywgJ2snXSwgKCkgPT4gewogICAgICAgIHNlYXJjaElucHV0Qm94Py5mb2N1cygpOwogICAgfSk7CgogICAgbGV0IGNvbHVtbkZpbHRlcnMgPSAkc3RhdGU8Q29sdW1uRmlsdGVyc1N0YXRlPihbXSk7CiAgICBsZXQgcm93U2VsZWN0aW9uID0gJHN0YXRlPFJvd1NlbGVjdGlvblN0YXRlPih7fSk7CiAgICBsZXQgcGFnaW5hdGlvbiA9ICRzdGF0ZTxQYWdpbmF0aW9uU3RhdGU+KHsgcGFnZUluZGV4OiAwLCBwYWdlU2l6ZTogMTAgfSk7CiAgICBsZXQgc29ydGluZyA9ICRzdGF0ZTxTb3J0aW5nU3RhdGU+KFtdKTsKCiAgICBjb25zdCB0YWJsZSA9IGNyZWF0ZVN2ZWx0ZVRhYmxlKHsKICAgICAgICBnZXQgZGF0YSgpIHsKICAgICAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgICAgfSwKICAgICAgICBjb2x1bW5zLAogICAgICAgIGdldENvcmVSb3dNb2RlbDogZ2V0Q29yZVJvd01vZGVsKCksCiAgICAgICAgZ2V0UGFnaW5hdGlvblJvd01vZGVsOiBnZXRQYWdpbmF0aW9uUm93TW9kZWwoKSwKICAgICAgICBnZXRGaWx0ZXJlZFJvd01vZGVsOiBnZXRGaWx0ZXJlZFJvd01vZGVsKCksCiAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgZ2V0IGNvbHVtbkZpbHRlcnMoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uRmlsdGVyczsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0IHBhZ2luYXRpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGFnaW5hdGlvbjsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0IHNvcnRpbmcoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc29ydGluZzsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0IHJvd1NlbGVjdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiByb3dTZWxlY3Rpb247CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG9uQ29sdW1uRmlsdGVyc0NoYW5nZTogKHVwZGF0ZXIpID0+IHsKICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICBjb2x1bW5GaWx0ZXJzID0gdXBkYXRlcihjb2x1bW5GaWx0ZXJzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbHVtbkZpbHRlcnMgPSB1cGRhdGVyOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBvblBhZ2luYXRpb25DaGFuZ2U6ICh1cGRhdGVyKSA9PiB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgcGFnaW5hdGlvbiA9IHVwZGF0ZXIocGFnaW5hdGlvbik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uID0gdXBkYXRlcjsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb25Sb3dTZWxlY3Rpb25DaGFuZ2U6ICh1cGRhdGVyKSA9PiB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgcm93U2VsZWN0aW9uID0gdXBkYXRlcihyb3dTZWxlY3Rpb24pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcm93U2VsZWN0aW9uID0gdXBkYXRlcjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIGxldCBzZWFyY2hWYWx1ZSA9ICRzdGF0ZSgodGFibGUuZ2V0Q29sdW1uKCdpZCcpPy5nZXRGaWx0ZXJWYWx1ZSgpIGFzIHN0cmluZykgPz8gJycpOwoKICAgICRlZmZlY3QoKCkgPT4gewogICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFibGUtYW5pbWF0ZScpLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgIGFuaW1hdGUoCiAgICAgICAgICAgICd0ci50YWJsZS1hbmltYXRlJywKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgb3BhY2l0eTogWzAsIDFdLAogICAgICAgICAgICAgICAgdHJhbnNsYXRlWTogWy01MCwgMF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAge30KICAgICAgICApOwogICAgfSk7Cg==">{}</script>

<div class="space-y-4">
    <div class="flex items-center space-x-2">
        <div class="relative flex-1">
            <Search class="absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" />
            {#if showKeyboardShortcut}
                <kbd
                    class="pointer-events-none absolute right-1.5 top-2 hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex"
                >
                    <span class="text-xs tracking-wider">⌘</span>K
                </kbd>
            {/if}
            <Input
                bind:ref={searchInputBox}
                type="text"
                placeholder="Search containers..."
                bind:value={searchValue}
                oninput={() => table.getColumn('id')?.setFilterValue(searchValue)}
                onkeydown={(e) => {
                    if (e.key === 'Enter') {
                        table.getColumn('id')?.setFilterValue(searchValue);
                    }
                }}
                onfocus={() => (showKeyboardShortcut = false)}
                onblur={() => (showKeyboardShortcut = searchValue?.length === 0)}
                class="pl-8 text-pretty"
            />
        </div>
        <div class="flex items-center space-x-2">
            <Switch
                disabled={!showOnlyRunningContainers && data.length === 0}
                id="running-containers-only"
                bind:checked={showOnlyRunningContainers}
            />
            <Label for="running-containers-only">Running Containers Only</Label>
        </div>
        <Button size="sm" variant="outline" onclick={getAllContainers}>
            <Refresh />
            <span>Refresh</span>
        </Button>
    </div>

    <div class="flex flex-col space-y-2">
        <div class="rounded-md border">
            <Table.Root>
                <Table.Header>
                    {#each table.getHeaderGroups() as headerGroup (headerGroup.id)}
                        <Table.Row>
                            {#each headerGroup.headers as header (header.id)}
                                <Table.Head>
                                    {#if !header.isPlaceholder}
                                        <FlexRender
                                            content={header.column.columnDef.header}
                                            context={header.getContext()}
                                        />
                                    {/if}
                                </Table.Head>
                            {/each}
                        </Table.Row>
                    {/each}
                </Table.Header>
                <Table.Body>
                    {#each table.getRowModel().rows as row (row.id)}
                        <Table.Row
                            data-state={row.getIsSelected() && 'selected'}
                            class="table-animate"
                        >
                            {#each row.getVisibleCells() as cell (cell.id)}
                                <Table.Cell>
                                    <FlexRender
                                        content={cell.column.columnDef.cell}
                                        context={cell.getContext()}
                                    />
                                </Table.Cell>
                            {/each}
                        </Table.Row>
                    {:else}
                        <Table.Row>
                            <Table.Cell colspan={columns.length} class="h-24 text-center">
                                {showOnlyRunningContainers
                                    ? 'No running containers.'
                                    : 'No results.'}
                            </Table.Cell>
                        </Table.Row>
                    {/each}
                </Table.Body>
            </Table.Root>
        </div>
        <div class="flex items-center justify-end space-x-2">
            <div class="text-muted-foreground flex-1 text-sm">
                {table.getFilteredSelectedRowModel().rows.length} of
                {table.getFilteredRowModel().rows.length} row(s) selected.
            </div>
            <div class="space-x-2">
                <Button
                    variant="outline"
                    size="sm"
                    onclick={() => table.previousPage()}
                    disabled={!table.getCanPreviousPage()}
                >
                    Previous
                </Button>
                <Button
                    variant="outline"
                    size="sm"
                    onclick={() => table.nextPage()}
                    disabled={!table.getCanNextPage()}
                >
                    Next
                </Button>
            </div>
        </div>
    </div>
</div>
